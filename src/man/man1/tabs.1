.TH TABS 1ICD "User Commands"
.UC 4
.SH NAME
tabs - technology abstraction tool
.SH SYNOPSIS
\fBtabs\fP [options]
.SH OPTIONS
.TP
.B -h, --help
Display a help message.
.TP
.B -v, --verbose
Turn on verbosity.
.TP
.B -V, --verboser
Turn also on
.I space3d
verbosity.
.TP
.B -q, --quiet
Don't produce informational messages. This option is cancelled by the
.B -v
option.
.TP
.B -s, --sfile FILE.s
Use the indicated technology file. By default, the default technology file
of the current project is used. Note that the rules generated by \fItabs\fP
will be placed in this technology file.
.TP
.B -m, --maskdata FILE
Use the indicated maskdata file. By default, the default maskdata file
of the current project is used.
.TP
.B -i, --ignore-preexisting
Ignore any preexisting capacitance rules present in the technology file.
.TP
.B -p, --precision low|medium|high
Use the given level of precision. Higher precision means longer computation time, in general.
The default value "low" should suffice in most cases, otherwise "medium" should be fine.
Note that the \fIprecision\fP is not used for the \fIvertical\fP capacitances part.
.TP
.B -E VALUE
Sets the error-factor (default 0.1|0.05|0.05).
This factor is used as stop-criterium for the values of
the \fIedge-surface\fP and \fIlateral\fP capacitances.
.TP
.B -L VALUE
Sets the number of conducting layers over which capacitive coupling is considered
significant (default 2).
See below for details.
.TP
.B -M VALUE
Sets the \fBcap3d.be_mode\fP parameter (default 0c).
(The \fIvertical\fP capacitances part uses always the default.)
.TP
.B -R, --edge-ratio VALUE
Sets the l/w ratio for
.I edge-surface
and
.I lateral
capacitance generation (default 10).
A higher value gives possible better results, but cost more compute time.
.TP
.B -Z, --z-window VALUE
Sets the window in the z-direction for which capacitive coupling is significant (value in micron).
This option is an alternative to the \fB-L\fP option.
.TP
.B --fake
Fake run.
It looks like a normal run without using the cache, but the extractor is not realy run.
All output is generated, the surface cap values are calculated,
but the rest of the values are zero.
.TP
.B --fix-vdim
Fix the vdimension conditions with the conductor conditions.
Conductor conditions are more complex.
.TP
.B --no-cache
Normally, \fItabs\fP caches its calculations in the \fI~/.cacd/cache/tabs4\fP directory.
You can use this flag to disable the cache.
The cache directory or
the cache-files in the cache directory can be removed without consequences.
But always
.I space3d
must be run.
.TP
.B --test-cache
Test against the cache to be sure that the results are the same as before.
It gives also a test summary in file \fI./tabs_summary.txt\fP.
And writes also results differences found to this file.
You have no speed advantage of the cache, because
.I space3d
runs must be done.
.TP
.B --no-color
This option disables colored output.
.TP
.B --omit-vias
Don't add via conditions to vertical capacitances.
.TP
.B --skip-ecaps
With this option you can skip the generation part of \fIedge-surface\fP capacitances.
.TP
.B --skip-lcaps
With this option you can skip the generation part of \fIlateral\fP capacitances.
.TP
.B --add-lcaps2
To generate other
.I lateral
capacitances (part2).
.TP
.B --skip-vcaps
With this option you can skip the generation part of \fIvertical\fP capacitances.
This are the \fIarea\fP (surface) and \fIedge-edge\fP capacitances.
.TP
.B --skip-vdim NAME,...
To skip one or more vdimensions.
Possible not for all vdimensions there must be generated capacitances.
For example for active area's.
.RE

.SH DESCRIPTION
The
.I tabs
tool allows the user to automatically produce capacitance rules
for a given technology. See \fItecc\fP(1ICD) or
\fIspace3d\fP(1ICD) for information on technology files.
Capacitance rules enable a more efficient way of circuit
extraction than full 3D extraction, at the cost of some accuracy.

When you wish to generate capacitance rules using \fItabs\fP,
first change your working directory to an appropriate project directory.
.I Tabs
will, by default, use the
.B maskdata
and
.B space.def.s
files of the process related to the current project.
You can change this behavior by specifying the
.B --maskdata
and/or
.B --sfile
flags. (In case you specify both flags, you will not need to be in a
project directory).

When
.I tabs
is run, it writes capacitance rules to the same technology file
(extension \fB.s\fP) as used for the input. Generated rules are written to the file
with a special tag, so that they can be automatically replaced when
.I tabs
is invoked at a later time. Hence, any pre-existing generated rules don't
have to be removed from the file manually, before running
.I tabs.

However, capacitance rules which were put in the technology file
manually (i.e., without a special tag), should be removed, or
.I tabs
will complain. `Experts' can use the
.B --ignore-preexisting
flag to ignore any capacitance rules which were entered manually.
In that case, the manually entered capacitance rules will remain in
the file, and
.I tabs
will add its own. It should be clear that this is not the preferred
way to work, as manually entered and generated capacitance
rules may conflict with each other (and this will generally result in
too large capacitance values generated by space).

A minimal technology file suitable for input to
.I tabs
is shown below.

.nf
unit vdimension 1e-6

conductors :
  # name    : condition : mask : resistivity : type
    cond_mf : cmf       : cmf  : 0.045       : m
    cond_ms : cms       : cms  : 0.030       : m

vdimensions :
    v_cmf : cmf : cmf : 1.70 0.70
    v_cms : cms : cms : 2.80 0.70

dielectrics :
   # Dielectric consists of 5 micron thick SiO2
   # (epsilon = 3.9) on a conducting plane.
   SiO2   3.9   0.0
   air    1.0   5.0
.fi

.I Tabs
essentially uses
the
.B conductors
section,
the
.B vdimensions
section, and the
.B dielectrics
section of the technology file. Please see \fItecc\fP(1ICD)
for more information on these sections.

.I Tabs
computes rules for
(vertical) area capacitances, (vertical and lateral) edge-edge capacitances,
ground-capacitances, and (vertical) edge-surface capacitances. See
the Space User's Manual for a description of these concepts. See also
the sections below for more details on how the computations are performed.
.PP
The
.B -L
option should be used in all but the simplest cases. It allows you to
specify a window
in the z-direction in which capacitive coupling is considered significant.
Normally,
.I tabs
takes into account the influences between all possible layers. This is,
however, not very useful in realistic cases. For example, when your
process contains several levels of metal, then the bottom-most layer of
metal will, most likely, not have any significant capacitive coupling to
the top-most layer. To reduce computation time, you should therefore
use this option. The value specified after
.B -L
is the number of conductor layers which should be taken into account.
In many cases, it is reasonable to use the value \fB1\fP, and in
some cases you might need to use the value \fB2\fP. Higher values may not
be useful in most situations.
.PP
In order for the
.B -L
option to work, the entries in the \fBvdimensions\fP section should be
sorted according to increasing z-coordinate. (\fITabs\fP extracts the order of
masks from the \fBmask\fP column, i.e., the third column, in the \fBvdimensions\fP section).
.PP
When the
.B -L
option is in effect, only the specified number of layers
are taken into account when determining parasitics, as described above.
If \fBn\fP is the conducting layer for which we determine parasitic coupling at
a certain moment (the "victim" layer), and \fBk\fP is the number of layers
specified for the \fB-L\fP option, then coupling between the victim layer \fBn\fP and
layers \fBn-k\fP through \fBn+k\fP (excluding \fBn\fP) is determined by \fItabs\fP.
The metal of layers \fBn-k-1\fP and \fBn+k+1\fP is considered by \fItabs\fP to be
omnipresent, which means those layers form a shield. For (vertical) area capacitances,
this means that when both the victim layer and a shielding layer are present,
then a capacitance from the victim layer to the shielding layer will be generated
(as normally), but when no metal is present in the shielding layer, then a capacitance
from the victim layer to ground is generated. This capacitance to ground
will improve the approximation of the total capacitance coupled to the victim layer.
.PP
As an alternative to the \fB-L\fP option, you may specify the
window of significance in microns, using the \fB--z-window\fP option
(or \fB-Z\fP for short). In this case, a reasonable value to use is
.B 2*(h+s)
where
.B h
is the maximum height of a conductor, and
.B s
is the maximum vertical spacing between two successive conductor layers.
You can see what influences have been considered by
.I tabs
by inspecting the technology file after
.I tabs
has completed its computation.
.PP
Internally,
.I tabs
uses the 3d mode of the space extractor to compute the values for the
capacitance rules, using various layout patterns. When you use the
.B --verbose
option, you will be able to see the output of the extraction process.

.SH COMPUTATION OF AREA CAPACITANCES
Area capacitances are the capacitances associated with the overlap area
of two (vertically) overlapping conductors. The capacitance value computed
by
.I tabs
is the capacitance of an equivalent parallel plate capacitor (i.e.,
a parallel plate capacitor with the same area). The overlap area
considered by
.I tabs
is the area in which there are no other intervening conductors.
Since the actual overlap area of two conductors is known only when
extracting, the area capacitances are normalized and have
the unit \fB[F/m^2]\fP.
.PP
As described above, the
.B -L
or
.B --z-window
options can be used to limit the window in which overlap is considered
by \fItabs\fP, and therefore
some more technicalities are involved. We will briefly discuss them now.
Let us consider a "victim" conductor.
It is assumed by
.I tabs
that two conducting ground planes (shielding planes) are always present above
and below this conductor. If \fBn\fP is the number of the victim layer,
and \fBk\fP is the number specified after the \fB-L\fP option, then
the shielding planes are considered to be in layer \fBn-k-1\fP and
\fBn+k+1\fP. (If the \fB--z-window\fP option is used instead, then the
shielding layers are determined from their vertical distance from the victim layer).
.PP
The use of shielding planes is justified by the assumption that the conductor
geometry in \fBk\fP layers is sufficiently dense to "catch"
practically all field lines emerging from the conductor in the victim layer.
For a higher value of \fBk\fP, this assumption becomes "more true".
.PP
The use of shielding layers has the following effect on
the rules generated by \fItabs\fP for (vertical) area capacitances.
When both the victim layer and a shielding layer are present,
then a capacitance from the victim layer to the shielding layer will be generated
(as normally), but when no metal is present in the shielding layer, then a capacitance
from the victim layer to ground is generated. This capacitance to ground
will improve the approximation of the total capacitance coupled to the victim
layer, and this will improve the simulated delay of signals propagating through
metal in the victim layer.

.SH COMPUTATION OF VERTICAL EDGE-EDGE CAPACITANCES
Vertical edge-edge capacitances are defined as the capacitances between the
edges (side-walls) of two conductors on different layers, where the edges of the
two conductors overlap exactly, when projected along the z-axis (in this definition,
we ignore the slope which a side-wall may have). The unit of these capacitances
is \fB[F/m]\fP.
.PP
Vertical edge-edge capacitances are calculated by computing the (3d) capacitance
.B c1
between two squared conductors of size
.B l*l
and calculating
.B c2
for two conductors
of size \fB(2*l)*(2*l)\fP. The edge-edge component is then computed
as \fBcee=(4*c1-c2)/(8*l)\fP.
.PP
If the \fB-L\fP or \fB--z-window\fP flag is specified, then vertical edge-edge capacitances are only
computed for conductor planes which are located within the specified distance from
each other.

.SH COMPUTATION OF EDGE-SURFACE CAPACITANCES
Edge surface capacitances are defined as the capacitances between a side-wall
of one conductor, and the top (bottom) of a conductor on a lower (higher) plane. The unit
of these capacitances is \fB[F/m]\fP.
.PP
Space allows us to specify different values for the edge-surface capacitance,
depending on the lateral distance from the side-wall in question to a nearby
conductor. See the Space User's Manual for more information.
.PP
Computation by \fItabs\fP is done by generating three rectangular conductors
in the victim layer, oriented horizontally, each with a width of \fBw\fP, and a
height of \fBl\fP, and at a horizontal distance of \fBs\fP from each other.
A large conductor at another layer is then placed below (or above) this geometrical
constellation. Now, the capacitance \fBc1\fP is calculated between the central
conductor in the victim layer, and the large conductor at the other layer. The
capacitance \fBc2\fP is calculated for the same constellation, but stretched by a
factor \fB2\fP in the horizontal direction (increasing only the width of the conductors, not
their spacing).
The edge-surface capacitance is then calculated by the formula
\fBcex = (2*c1-c2)/(2*l)\fP.
.PP
Different values of \fBcex\fP
are calculated for increasing values of \fBs\fP, starting with
\fB.5\fP times the value of the thickness of the victim layer, and
increasing by a factor of \fB2\fP each time, until some large value of \fBs\fP.
.PP
When the \fB-L\fP or \fB--z-window\fP option is specified, then (shielding) ground planes
are used when the distance between both conductor planes becomes too large; this
works similarly w.r.t. the case of area-capacitances.

.SH COMPUTATION OF LATERAL CAPACITANCES
Lateral capacitances are defined as the capacitances between conductors in the same
layer. Lateral capacitances are only computed by \fIspace\fP when there are no
other intervening conductors. Lateral capacitances have unit \fB[F/m]\fP.
.PP
\fITabs\fP computes several values for the lateral capacitance, each value for
a different lateral spacing \fBs\fP between the conductors.
The first value of \fBs\fP used is \fB.5\fP times
the value of the thickness of the victim layer,
and \fBs\fP is increased by a factor \fB2\fP each time, until some large value of \fBs\fP.

.SH EXAMPLE
The following example shows how
.I tabs
can be invoked.

.nf
    % cd my-project-dir
    % tabs -L 1 -s tech.s
.fi

.SH PRECISION TUNING
.I Tabs
runs the
.I space3d
extractor with a number of
.I cap3d
parameters.
Which parameter values are chosen, is depended of the chosen \fIprecision\fP.
The following set parameter values is always used:

.nf
  cap3d.be_mode = 0c
  cap3d.max_be_area = computed-area / complexity
  cap3d.be_window = infinity
.fi

Note that for the generation of \fIvertical\fP capacitances a fixed
complexity is used (not depended of the chosen \fIprecision\fP).
To use \fBmedium\fP \fIprecision\fP, invoke \fItabs\fP as follows:

.nf
    % tabs -p medium
.fi

The \fIprecision\fP calculates the \fBmax_be_area\fP parameter used.
How smaller the \fBmax_be_area\fP,
how more boundary elements are used for the layout area.
For example, when one conductor plate area is divided in 16 elements,
then the complete conductor has at least 2*16 + 8 elements.
Thus, two conductors above each other have at least 80 elements.
To calculate, a Schur matrix inversion with a dimension of 80 must be done.
Note that, how bigger the dimension, how more matrix inversion computation time is needed.
By the default
.B low
.I precision
as less as possible boundary elements are used for the used models.
That does not mean, that the results are per definition less accurate.
.PP
Note that the chosen
.I precision
and its parameters (
.B be-mode
.B error-factor
) are written to
.if t .br
the GENERATED technology file parts.

.SH BUGS AND CAVEATS
The progress indicator is too pessimistic (but it is only meant to give an indication anyway).
Note that via's are not taken into account.
When option
.B --omit-vias
is used,
via's must be added by hand to the conditions of area capacitances.
Note that you can change @gnd into @sub, if you want to connect to the substrate node.
Note that the ground or substrate plane normally contains n-well area's.
Thus, you can add the area to n-well capacitance rules,
by deriving the values from the existing area to ground capacitances.
.PP
Report bugs to <space-support-ewi@tudelft.nl>

.SH AUTHOR(S)
Kees-Jan van der Kolk,
Wang Qiang,
Simon de Graaf.
.PP
Copyright (C) 2004-2011, Delft University of Technology, The Space Team.

.SH SEE ALSO
N.P. van der Meijs, A.J. van Genderen, F. Beeftink and
P.J.H. Elias, ``Space User's Manual,'' Delft University of
Technology, Delft, The Netherlands.
.PP
space3d(1ICD),
tabs-verify,
tecc(1ICD).
